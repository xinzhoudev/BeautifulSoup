(window.cbJsonP=window.cbJsonP||[]).push([[259],{276:function(e,t,n){"use strict";t.__esModule=!0;var r=o(n(117)),a=o(n(277));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function e(t,n,o){null===t&&(t=Function.prototype);var i=(0,a.default)(t,n);if(void 0===i){var u=(0,r.default)(t);return null===u?void 0:e(u,n,o)}if("value"in i)return i.value;var s=i.get;return void 0!==s?s.call(o):void 0}},277:function(e,t,n){e.exports={default:n(278),__esModule:!0}},278:function(e,t,n){n(279);var r=n(8).Object;e.exports=function(e,t){return r.getOwnPropertyDescriptor(e,t)}},279:function(e,t,n){var r=n(38),a=n(94).f;n(110)("getOwnPropertyDescriptor",(function(){return function(e,t){return a(r(e),t)}}))},541:function(e,t,n){"use strict";n.r(t);var r,a=n(22),o=n.n(a),i=n(117),u=n.n(i),s=n(15),c=n.n(s),l=n(4),d=n.n(l),f=n(118),v=n.n(f),p=n(9),g=n.n(p),h=n(119),k=n.n(h),_=n(276),y=n.n(_),m=(n(34),n(40)),w=[{name:"logger",actions:[{name:"track",method:"post",endpoint:"/api/internal/kvl",headers:{"X-Requested-With":"XMLHttpRequest","Content-Type":"application/json"}}]}],b=n(3),E=n.n(b),O=n(6),M=n.n(O),C=n(33),j=function(){function e(t){d()(this,e),t&&this.setMetadata(t),this.ready=this.initialize()}return g()(e,[{key:"setMetadata",value:function(e){e&&"object"===(void 0===e?"undefined":M()(e))&&E()(e).length>0&&(this.meta=e)}}],[{key:"throw",value:function(e,t){}},{key:"getMaskedError",value:function(){var e=new Error;return e.name="unknown_error",e.message=Object(C.d)("error.unknownError"),e}},{key:"throwMaskedError",value:function(t,n){throw e.getMaskedError()}},{key:"sanitizeError",value:function(e){if(e instanceof Error||e&&e.name){var t=new Error;return t.name=e.name,t.message=e.displayMessage||e.message,t.stack=e.stack,t}return new Error(e)}}]),e}(),R=n(16),G=n(44);!function(e){e.ERROR="ERROR",e.INFO="INFO"}(r||(r={}));var I=n(57),L=function(e){function t(e){d()(this,t);var n=v()(this,(t.__proto__||u()(t)).call(this));return n.commMgr=e,n.apiClient=e.apiClient,n.iframeClient=e.connectionClient,n}return k()(t,e),g()(t,[{key:"init",value:function(){return this.apiClient.addApis(w),c.a.resolve()}},{key:"initialize",value:function(){return c.a.resolve()}},{key:"setMetadata",value:function(e){y()(t.prototype.__proto__||u()(t.prototype),"setMetadata",this).call(this,e)}},{key:"log",value:function(e,t){var n=this,a=window.CbJsSource,i={data:Object(R.b)(o()({},Object(R.o)(e),t,this.meta,{key:G.a.LOGGING,log_data_type:r.INFO,ref_module:"chargebee.js"},a&&{cbjs_source:a}),"_"),type:"kvl"};this.commMgr.pluginMan.isPluginLoaded(m.a.CHECKOUT_UTILS)?this.commMgr.getCheckoutUtilsPlugin().then((function(e){return e.getHpData().customer_handle})).then((function(e){e&&(i.data.customer_handle=e),n.apiClient.logger.track({},i)})):this.apiClient.logger.track({},i)}},{key:"logError",value:function(e,t){var n=window.CbJsSource,a={data:Object(R.b)(o()({},Object(R.o)(j.sanitizeError(e)),t,this.meta,{key:G.a.LOGGING,log_data_type:r.ERROR,ref_module:"chargebee.js"},n&&{cbjs_source:n}),"_"),type:"kvl"};this.apiClient.logger.track({},a)}},{key:"captureException",value:function(e){var t=e.error,n=e.extraData;return t&&(I.a.error(t,n),this.logError(t,n)),c.a.resolve({acknowledged:!0})}},{key:"captureKVL",value:function(e){return this.log(e),c.a.resolve({acknowledged:!0})}}]),t}(j);t.default=L}}]);
//# sourceMappingURL=259-04d5694ef73a0980730d.js.map